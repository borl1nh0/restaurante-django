{% extends 'restaurante/base.html' %}
{% load django_bootstrap5 %}
{% block content %}

<h2>Listado de Restaurantes</h2>

<a href="{% url 'restaurantes_crear' %}">Crear nuevo restaurante</a>

<ul>
  {% for r in restaurantes %}
  <li>
    <strong>{{ r.nombre }}</strong><br>
    Teléfono: {{ r.telefono }}<br>
    Dirección: {{ r.direccion }}<br>

    Clientes frecuentes:
    {% if r.clientes_frecuentes.all %}
      {% for c in r.clientes_frecuentes.all %}
        {{ c.nombre }}{% if not forloop.last %}, {% endif %}
      {% endfor %}
    {% else %}
      Ninguno
    {% endif %}
    <br>

    <!-- Botón editar -->
    <a href="{% url 'restaurantes_editar' r.id %}">Editar</a> |

    <!-- Botón eliminar CONTROLADO POR TU JS -->
    <form method="post"
          action="{% url 'restaurantes_eliminar' r.id %}"
          style="display:inline;"
          data-confirm="¿Seguro que quieres eliminar el restaurante {{ r.nombre }}?">
      {% csrf_token %}
      <button type="submit" style="background:none;border:none;color:red;cursor:pointer;">
        Eliminar
      </button>
    </form>

  </li>
  {% empty %}
  <li>No hay restaurantes registrados.</li>
  {% endfor %}
</ul>

{% endblock %}
