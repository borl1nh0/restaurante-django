{% extends 'restaurante/base.html' %}

{% block content %}

<h2 class="mb-4">Restaurantes</h2>

<a href="{% url 'restaurantes_crear' %}" class="btn btn-primary mb-3">Crear nuevo restaurante</a>

<ul class="list-group">
    {% for r in restaurantes %}
    <li class="list-group-item">

        <h5>{{ r.nombre }}</h5>

        <p class="mb-1">
            <strong>Teléfono:</strong> {{ r.telefono }}<br>
            <strong>Dirección:</strong> {{ r.direccion }}<br>
            <strong>Clientes frecuentes:</strong>
            {% if r.clientes_frecuentes.exists %}
                {% for c in r.clientes_frecuentes.all %}
                    {{ c.nombre }}{% if not forloop.last %}, {% endif %}
                {% endfor %}
            {% else %}
                Ninguno
            {% endif %}
        </p>

        <a href="{% url 'restaurantes_editar' r.id %}" class="btn btn-sm btn-primary">Editar</a>
        
        <form method="post" action="{% url 'restaurantes_eliminar' r.id %}" style="display:inline;">
            {% csrf_token %}
            <button type="submit" class="btn btn-sm btn-danger" data-confirm="¿Seguro que quieres eliminar este restaurante?">
                Eliminar
            </button>
        </form>

    </li>
    {% empty %}
        <li class="list-group-item">No hay restaurantes registrados.</li>
    {% endfor %}
</ul>

{% endblock %}
