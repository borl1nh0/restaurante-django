{% extends 'restaurante/base.html' %}

{% block content %}

<div class="container mt-4">

    <h2 class="mb-4">Clientes frecuentes</h2>

    <ul class="list-group mb-3">

        {% for cliente in clientes %}
        <li class="list-group-item">
            <strong>{{ cliente.nombre }}</strong>
            —
            Pedidos: {{ cliente.num_pedidos }}
            —
            Favoritos:
            {% if cliente.restaurantes_favoritos.all %}
                {% if cliente.restaurantes_favoritos.count > 0 %}
                    {% for r in cliente.restaurantes_favoritos.all %}
                        {{ r.nombre }}{% if not forloop.last %}, {% endif %}
                    {% endfor %}
                {% else %}
                    (ninguno)
                {% endif %}
            {% else %}
                (ninguno)
            {% endif %}
        </li>
        {% empty %}
        <li class="list-group-item">No hay clientes frecuentes.</li>
        {% endfor %}

    </ul>

    <a href="{% url 'index' %}" class="btn btn-secondary">Volver</a>

</div>

{% endblock %}
