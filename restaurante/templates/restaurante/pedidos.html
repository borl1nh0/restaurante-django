{% extends 'restaurante/base.html' %}

{% block content %}

<h1 class="mb-4">Pedidos</h1>

<div class="mb-3">
    <p><strong>Suma total:</strong> {{ suma_total }} €</p>
    <p><strong>Promedio:</strong> {{ promedio }} €</p>
</div>

<hr>

{% for pedido in pedidos %}
<div class="card mb-4 shadow-sm">
    <div class="card-body">
        
        <h5 class="card-title">
            Pedido {{ pedido.id }} — {{ pedido.cliente.nombre }}
        </h5>

        <p class="text-muted mb-2">
            Restaurante: {{ pedido.restaurante.nombre }}
            {% if pedido.reserva %}
                — Reserva: {{ pedido.reserva.fecha }} {{ pedido.reserva.hora }}
            {% endif %}
        </p>

        <ul class="list-group mb-3">
            {% for linea in pedido.lineapedido_set.all %}
            <li class="list-group-item d-flex justify-content-between align-items-center">
                <span>{{ linea.cantidad }}× {{ linea.plato.nombre }}</span>
                <span>{{ linea.plato.precio }} €</span>
            </li>
            {% endfor %}
        </ul>

        <p class="fw-bold">
            Total pedido: {{ pedido.total }} €
        </p>

    </div>
</div>
{% endfor %}

<a class="btn btn-secondary" href="{% url 'index' %}">Volver</a>

{% endblock %}
