{% extends 'restaurante/base.html' %}
{% load django_bootstrap5 %}
{% block content %}
<h2>Listado de Reservas</h2>

<a class="btn btn-primary mb-3" href="{% url 'reservas_crear' %}">Crear nueva reserva</a>

<div class="row">
  {% for res in reservas %}
  <div class="col-sm-6 col-md-4 mb-4">
    <div class="card h-100">
      <div class="card-body d-flex flex-column">
        <h5 class="card-title">{{ res.cliente.nombre }}</h5>
        <h6 class="card-subtitle mb-2 text-muted">Mesa {{ res.mesa.numero }}</h6>
        <p class="card-text mb-1"><strong>Fecha:</strong> {{ res.fecha }} <strong>Hora:</strong> {{ res.hora }}</p>
        {% if res.notas %}
          <p class="card-text"> <strong>Notas:</strong> {{ res.notas|truncatechars:100 }} </p>
        {% endif %}
        <div class="mt-auto">
          <a href="{% url 'reservas_editar' res.id %}" class="btn btn-sm btn-outline-primary">Editar</a>
          <a href="{% url 'reservas_eliminar' res.id %}" class="btn btn-sm btn-outline-danger confirm-delete" data-confirm="Â¿Seguro que quieres eliminar la reserva de {{ res.cliente.nombre }} (Mesa {{ res.mesa.numero }})?">Eliminar</a>
        </div>
      </div>
    </div>
  </div>
  {% empty %}
  <div class="col-12"><p>No hay reservas registradas.</p></div>
  {% endfor %}
</div>
{% endblock %}
